<!DOCTYPE html>
<html>
<head>
	<title>Gara Trenuri</title>
	<script src="https://kit.fontawesome.com/d90fcbd324.js" crossorigin="anonymous"></script>
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Sansita Swashed|Roboto">
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
	<style type="text/css">
		*{
		box-sizing: border-box;
		padding: 0;
		margin: 0;
		}
		html, body{
		height: 100vh;
		margin: 0;
		padding: 0;
		font-family: 'Roboto';
		}
		ol,ul {
    		list-style:none;
    	}
		.container{
			width: 100%;
			height: 100vh;
			background-color: #B2B5B6;
			display: flex;
			flex-direction: column;
			align-items: center;
		}
		.header{
			height: 10%;
			width: 100%;
			display: flex;
			flex-direction: row;
			justify-content: 
		}
		.main-section{
			max-height: 200%;
			width: 100%;
			display: flex;
			justify-content: center;
		}
		.pages{
			background-color: white;
			width: 80%;
		}
		.side-left{
			width: 10%;
			display: flex;
			flex-direction: column;
			justify-content: center;
			align-items: center;
		}
		.side-right{
			width: 10%;
		}
		.main-section h4{
			text-align: center;
			font-family: 'Sansita Swashed';
			font-size: 1.2em;
			margin:5px 0 10px 0;
		}
		.footer{
			height: 10%;
			width: 100%;
			display: flex;
			align-items: center;
			justify-content: center;
			flex-direction: column;
		}
		.logo{
			width: 10%;
		}
		.menu{
			width: 80%;
			display: flex;
			align-items: center;
			font-family: 'Sansita Swashed';
		}
		.menu ul{
			flex:1;
			height: 70%;
			display: flex;
			flex-direction: row;
		}
		.menu .first{
			flex:1;
			display: flex;
			flex-direction: row;
			justify-content: flex-start;
			align-content: center;
		}
		.menu .last{
			flex:1;
			display: flex;
			flex-direction: row;
			justify-content: flex-end;
			align-content: center;
		}
		.menu .middle{
			flex:1;
			display: flex;
			flex-direction: row;
			justify-content: center;
			align-items: center;
		}
		.middle span{
			width: 90px;
			color: white;
			padding: 5px 0 5px 0;
		}
		.menu .first li, .menu .last li{
			margin: 5px;
			cursor: pointer;
			border: 2px solid #ACBED8;
			border-radius: 2px;
			background: #ACBED8;
			padding: 10px;
			color: white;
			transition: background 0.5s;
		}
		.menu .first li:hover, .menu .last li:hover{
			background: #E8EBF7;
			color: #AEB9BF;
		}
		ul.acasa .first .acasa,
		ul.anunturi .first .anunturi,
		ul.bilete .first .bilete,
		ul.contacte .first .contacte{
			background-color:#D78521;
			border-color: #D78521;
		}

	.modal-container{
		position: fixed;
		background: rgba(0, 0, 0, 0.7);
		width: 100vw;
		height: 100vh;
		z-index: 100;
		display: flex;
	}
	.modal-message-container{
		background-color: white;
		width: 50vw;
		height: 50vh;
		margin: auto;
		opacity: 1;
		display: flex;
		flex-direction: column;
	}
	.modal-message-header{
	  	background-color: #EDEDED;
	  	flex:1;
	  	text-align: center;
	  	color: #41403F;
	}
	.modal-message-header h1{
		margin-top: 0.5em;
		font-family: Roboto;
	}
	.modal-message-content{
		background-color: white;
		flex:3;
		padding: 2em;
		font-family: Roboto;
	}
	.modal-message-footer{
		background-color: white;
		flex:1;
	}
	.modal-close-btn{
		flex:none;
		position: absolute;
		top: 4em;
		right: 12em;
		background-color: transparent;
  		border: none;
  		color: white;
  		padding: 12px 16px;
  		font-size: 26px;
  		cursor: pointer;
	}
	.modal-close-btn i:hover{
		color: #FF6733;
	}
	.modal-message-content form{
		display: flex;
		flex-direction: column;
		justify-content: center;
		align-items: center;
	}
	.modal-message-content form input, .modal-message-content form button {
		width: 50%;
		padding: 2%;
	}
	.logo{
		display: flex;
		justify-content: center;
		flex-direction: column;
		align-items: center;
		color: white;
	}
	.logo-image{
		margin-top: 20%;
		width: 90%;
		height: auto;
	}
	.ending{
		display: flex;
		flex-direction: column;
		justify-content: center;
		align-items: center;
		width: 10%;
		color: white;
	}
	.ending .status{
		border: 1px solid white;
		padding: 5%;
	}
	.orar table {
	  border-collapse: collapse;
	  width: 100%;
	}

	.orar th, .orar td {
	  text-align: left;
	  padding: 8px;
	}

	.orar tr:nth-child(even){background-color: #E8EBF7}

	.orar th {
	  background-color: #ACBED8;
	  color: white;
	  cursor: pointer;
	}
	.filtru{
		margin:5px 0 10px 0;
	}
	.filtru th{
		background-color: #D78521;
	}
	.filtru input{
		width: 100%;
		padding: 2%;
	}
	.pagina-bilete{
		width: 100%;
		height: 100%;
		display: flex;
	}
	.pagina-bilete h4{
		margin:0;
	}
	.constructor-bilet{
		width: 50%;
		display: flex;
		flex-direction: column;
	}
	.rezultat-bilet{
		width: 50%;
	}
	.creaza-sus{
		flex: 1;
		background: #F2D398;
	}
	.creaza-jos{
		flex: 1;
		background: #F2D398;
	}
	.tabel-bilet table, .tabel-bilet th, .tabel-bilet td {
  		border: 1px solid black;
	}
	.tabel-bilet table{
		width: 100%;
		background: #E8EBF7;
	}
	.tabel-bilet tr{
		display: flex;
		flex-direction: row;
	}
	.tabel-bilet td{
		flex:1;
		display: flex;
		justify-content: space-between;
		height: 2em;
	}
	.tabel-bilet input, .tabel-bilet select{
		flex: 1;
		padding: 2px;
		margin-left: 5px;
	}
	.tabel-bilet button{
		width: 10em;
		background: #ACBED8;
		border: none;
	}
	.tabel-bilet button:hover{
		background: #D78521;
	}
	</style>
</head>
<body>
	<div ng-app="myApp" ng-controller="formCtrl">

	<div class="modal-container" ng-show="flag">
		<button class="modal-close-btn" ng-click="closeModal()"><i class="fa fa-close"></i></button>
		<div class="modal-message-container">
			<div class="modal-message-header">
				<h1>Autentificare</h1>
			</div>
			<div class="modal-message-content">
				<form>
				<input type="text" name="login" ng-model="intermediar.nume" placeholder="Login">
				<input type="password" name="parola" ng-model="intermediar.parola" placeholder="Parola">
				<button ng-click="autentificare()">Autentificare</button>
				<input type="reset" name="reset">
				{{status}}
				<p ng-show='nuExista'>Nu exista asa cont!</p>
				<p>Conturi:</p>
				<p ng-repeat="x in conturi">{{"login: " + x.nume + " " + "parola: " + x.parola}}
				</form>
			</div>
			<div class="modal-message-footer">
		
			</div>
		</div>
	</div>

	<div class="modal-container" ng-show="flag2">
		<button class="modal-close-btn" ng-click="closeModal()"><i class="fa fa-close"></i></button>
		<div class="modal-message-container">
			<div class="modal-message-header">
				<h1>Inregistrare</h1>
			</div>
			<div class="modal-message-content">
				<form>
				<input type="text" name="login" ng-model="nume" placeholder="Login">
				<input type="password" name="parola1" ng-model="parola1" placeholder="Parola">
				<input type="password" name="parola2" ng-model="parola2" placeholder="Confirma Parola">
				<button ng-click="signUp()">Inregistrare</button>
				<input type="reset" name="reset">
				<p ng-show='coincidenta'>Deja exista asa cont!</p>
				<p>Conturi:</p>
				<p ng-repeat="x in conturi">{{"login: " + x.nume + " " + "parola: " + x.parola}}
				</form>
			</div>
			<div class="modal-message-footer">
		
			</div>
		</div>
	</div>

		<div class="container" ng-init="schimbaPagina('acasa'); active='acasa'">
			<div class="header">
				<div class="logo" id="logo">
					<img src="images/train.png" class="logo-image">
				</div>
				<div class="menu">
					<ul class="{{active}}">
				    <div class="first">
					<li ng-click="schimbaPagina('acasa'); active='acasa'" class="acasa">Acasa</li>
					<li ng-click="schimbaPagina('anunturi'); active='anunturi'" class="anunturi">Anunturi</li>
					<li ng-click="schimbaPagina('bilete'); active='bilete'" class="bilete">Bilete</li>
					<li ng-click="schimbaPagina('contacte'); active='contacte'" class="contacte">Contacte</li>
				    </div>
				    <div class="middle">
				    	<span>{{ azi | date : "mediumDate" }}</span>
				    	<span>{{timpul}}</span>
				    </div>
					<div class="last">
					<li ng-click="openModal()">Log-in</li>
					<li ng-click="logOut()" ng-if="autentificat">Log-out</li>
					<li ng-click="openModal2()" ng-if="!autentificat">Sign-up</li>
					</div>
					</ul>
				</div>
				<div class="ending">
					<div class="status">
					{{ status }}
					<p ng-if="autentificat">{{ "login: " + intermediar.nume }}</p>
					</div>
				</div>
			</div>
			<div class="main-section">
			 <div class="side-left">
			 	{{romania}}
			 </div>
			<div class="pages">
		<div ng-show='Acasa' class="pagina-acasa">
			<div class="container-orar">
				<div class="filtru">
					<h4>Filtreaza</h4>
					<div class="orar">
					<table>
					<tr><th>Locul Plecare</th><th>Data Plecare</th><th>Ora Plecare</th><th>Destinatia</th><th>Data Sosire</th><th>Ora Sosire</th></tr>
					<tr>
					<td><input type="text" name="plecare" ng-model="filtru.plecare"></td>
					<td><input type="text" name="data1" ng-model="filtru.data1"></td>
					<td><input type="text" name="data1" ng-model="filtru.ora1"></td>
					<td><input type="text" name="plecare" ng-model="filtru.destinatia"></td>
					<td><input type="text" name="data1" ng-model="filtru.data2"></td>
					<td><input type="text" name="data1" ng-model="filtru.ora2"></td>
					</tr>
					</table>
					</div>
				</div>
				<h4>Orar</h4>
				<div class="orar">
			<table>
				<tr><th ng-click="orderByMe('plecare')">Locul Plecare</th><th ng-click="orderByMe('data1')">Data Plecare</th><th ng-click="orderByMe('ora1')">Ora Plecare</th><th ng-click="orderByMe('destinatia')">Destinatia</th><th ng-click="orderByMe('data2')">Data Sosire</th><th ng-click="orderByMe('ora2')">Ora Sosire</th></tr>
				<tr ng-repeat="x in orar | orderBy:myOrderBy | filter: filtru"><td>{{x.plecare}}</td><td>Data: {{x.data1 | date : "mediumDate" }}</td><td> Ora: {{x.ora1}}</td><td>{{x.destinatia}}</td><td>Data: {{x.data2 | date : "mediumDate" }}</td><td> Ora: {{x.ora2}}</td></tr>
			</table>
				</div>
			</div>
		</div>
		<div ng-show='Anunturi' class="pagina-anunturi">Anunturi</div>
		<div ng-show='Bilete' class="pagina-bilete">
			<div class="constructor-bilet">
				<div class="creaza-sus">
					<h4>Creaza Bilet</h4><br>
					<p><h5>Pentru a putea crea bilet, trebuie sa fii autentificat; <br> Statusul tau: {{status}}</h5></p><br>
				<form>
				<div class="tabel-bilet">
				<table>
				<tr>
					<td>
						Nume: <input type="text" name="nume" ng-model="bilet_nume" required>
					</td>
					<td>
						Prenume: <input type="text" name="prenume" ng-model="bilet_prenume" required>
					</td>
				</tr>
				<tr>
					<td>
						Data nasterii: <input type="date" name="data" ng-model="bilet_data" required>
					</td>
					<td>
						Numar bilete</label><input type="number" name="numar" ng-model="bilet_numar" required>
					</td>
				</tr>
				<tr>
					<td colspan="2">
				Suită <input type="radio" ng-model="bilet_vagon" value="Suita">
    			Coupe </label> <input type="radio" ng-model="bilet_vagon" value="Coupe">
    			Loc rezervat </label> <input type="radio" ng-model="bilet_vagon" value="Rezervat">
    			Sedentar </label><input type="radio" ng-model="bilet_vagon" value="Sedentar">
					</td>
				</tr>
				<tr>
					<td colspan="2">
						Calatorie: <select ng-model="bilet_calatorie" ng-options="(x.data1.toDateString() +' '+x.ora1+' '+x.plecare +' -> '+x.destinatia) for x in orar" required></select>
					</td>
				</tr>
				<tr>
					<td><button ng-click="submit()" ng-disabled="!autentificat">Finiseaza</button></td>
					<td><button type="reset">Sterge</button></td>
				</tr>
    			</table>
    			</div>
    			</form>
    			</div>
    			<div class="creaza-jos">
    			<h4>Rezultat</h4>
    			<br>
    			<div class="tabel-bilet" ng-init="bilet.total=0; rezultat_bilet=true;">
				<table>
				<tr>
					<td>
						Nume: {{bilet.nume}}
					</td>
					<td>
						Prenume: {{bilet.prenume}}
					</td>
				</tr>
				<tr>
					<td>
						Data nasterii: {{bilet.data.toDateString()}}
					</td>
					<td>
						Numar bilete: {{bilet.numar}}
					</td>
				</tr>
				<tr>
					<td colspan="2">
				     Tip vagon: {{bilet.vagon}}
					</td>
				</tr>
				<tr>
					<td colspan="2">
						Calatorie: {{bilet.calatorie.data1.toDateString() +' '+bilet.calatorie.ora1+' '+bilet.calatorie.plecare +' -> '+bilet.calatorie.destinatia}}
					</td>
				</tr>
				<tr>
					<td colspan="2">
						Total: {{bilet.total + " lei"}}
					</td>
				</tr>
					<tr>
					<td><button ng-disabled="rezultat_bilet" ng-click="cumpara()">Cumpara</button></td>
					<td><button ng-disabled="rezultat_bilet" ng-click="renunta()">Renunta</button></td>
				</tr>
    			</table>
    			</div>
    			</div>
			</div>
			<div class="rezultat-bilet">
				<h4>Bilete Disponibile</h4>
				<div class="orar">
    				<table>
    					<tr><th ng-click="orderByMe('plecare')">Locul Plecare</th><th ng-click="orderByMe('data1')">Data Plecare</th><th ng-click="orderByMe('ora1')">Ora Plecare</th><th ng-click="orderByMe('destinatia')">Destinatia</th><th ng-click="orderByMe('data2')">Data Sosire</th><th ng-click="orderByMe('ora2')">Ora Sosire</th></tr>
    					<tr ng-repeat="x in orar | orderBy:myOrderBy | filter: filtru"><td>{{x.plecare}}</td><td>Data: {{x.data1 | date : "mediumDate" }}</td><td> Ora: {{x.ora1}}</td><td>{{x.destinatia}}</td><td>Data: {{x.data2 | date : "mediumDate" }}</td><td> Ora: {{x.ora2}}</td></tr>
    				</table>
    			</div>
			</div>
		</div>
		<div ng-show='Contacte' class="pagina-contacte">Contacte</div>
			</div>
			<div class="side-right">
				
			</div>
			</div>
			<div class="footer">
				<center>&#169 Jigău Cristian</center>
			</div>
		</div>
	</div>
	<script type="text/javascript">
		var app = angular.module('myApp',[]); 
		app.controller('formCtrl',function($scope,$interval){
			$scope.status = "Ne autentificat";
			$scope.schimbaPagina = function(e){
				$scope.Acasa = false;
				$scope.Anunturi = false;
				$scope.Bilete = false;
				$scope.Contacte = false;
				switch(e){
					case 'acasa': $scope.Acasa = true; break;
					case 'anunturi': $scope.Anunturi = true; break;
					case 'bilete': $scope.Bilete = true;  break;
					case 'contacte': $scope.Contacte = true; break;
				}
			};
			$scope.closeModal = function (){
				$scope.flag = false;
				$scope.flag2 = false;
			};
			$scope.openModal = function (){
				$scope.flag = true;
			};
			$scope.openModal2 = function (){
				$scope.flag2 = true;
			};
			$scope.intermediar ={
				nume:"",
				parola:""
			};
			$scope.autentificat = false;
			$scope.conturi = [{
				nume: 'admin',
				parola: 'admin'
			}];
			$scope.autentificare = function(){
				$scope.conturi.forEach(function(arrayItem){
					if(arrayItem.nume == $scope.intermediar.nume && arrayItem.parola == $scope.intermediar.parola){
						$scope.autentificat = true;
						$scope.nuExista = false;
						$scope.status = "Autentificat";
						$scope.closeModal();
					} else $scope.nuExista = true;
				});
			};
			$scope.logOut = function(){
				$scope.intermediar.nume = "";
				$scope.intermediar.prenume = "";
				$scope.autentificat = false;
				$scope.status = "Ne autentificat";
				$scope.rezultat_bilet = true;
			};
			
			$scope.signUp = function(){
				if($scope.parola1 == $scope.parola2){
					$scope.conturi.forEach(function(arrayItem){
					if(arrayItem.nume == $scope.nume && arrayItem.parola == $scope.parola1){
						$scope.coincidente = true;
					}
					else {$scope.conturi.push({ nume: $scope.nume, parola: $scope.parola1 }); 
					$scope.coincidente = false;}
					});
				}
			};
			 $scope.timpul = new Date().toLocaleTimeString('ro-RO');
  			 $interval(function () {
      		 $scope.timpul = new Date().toLocaleTimeString('ro-RO');
  			 }, 1000);

  			 $scope.azi = new Date();
  			 $scope.maine = new Date($scope.azi);
  			 $scope.maine.setDate($scope.maine.getDate() + 1);
  			 $scope.poimaine = new Date($scope.maine);
  			 $scope.poimaine.setDate($scope.poimaine.getDate() + 1);


  			 $scope.orar = [
  			 {
  			 	plecare: "Chisinau",
  			 	data1: $scope.azi,
  			 	ora1: "19:45",
  			 	destinatia: "Aneni",
  			 	data2: $scope.azi,
  			 	ora2: "20:45"
  			 },
  			 {
  			 	plecare: "Iasi",
  			 	data1: $scope.azi,
  			 	ora1: "18:15",
  			 	destinatia: "Chisinau",
  			 	data2: $scope.azi,
  			 	ora2: "21:30"
  			 },
  			 {
  			   	plecare: "Cimislia",
  			 	data1: $scope.azi,
  			 	ora1: "17:45",
  			 	destinatia: "Aneni",
  			 	data2: $scope.azi,
  			 	ora2: "19:20"
  			 },
  			 {
  			   	plecare: "Chisinau",
  			 	data1: $scope.azi,
  			 	ora1: "20:30",
  			 	destinatia: "Adjud",
  			 	data2: $scope.azi,
  			 	ora2: "1:45"
  			 },
  			 {
  		  		plecare: "Aneni",
  			 	data1: $scope.azi,
  			 	ora1: "7:45",
  			 	destinatia: "Chisinau",
  			 	data2: $scope.azi,
  			 	ora2: "8:45"
  			 },
  			  {
  			 	plecare: "Chisinau",
  			 	data1: $scope.maine,
  			 	ora1: "19:45",
  			 	destinatia: "Aneni",
  			 	data2: $scope.maine,
  			 	ora2: "20:45"
  			 },
  			 {
  			 	plecare: "Iasi",
  			 	data1: $scope.maine,
  			 	ora1: "18:15",
  			 	destinatia: "Chisinau",
  			 	data2: $scope.maine,
  			 	ora2: "21:30"
  			 },
  			 {
  			   	plecare: "Cimislia",
  			 	data1: $scope.maine,
  			 	ora1: "17:45",
  			 	destinatia: "Aneni",
  			 	data2: $scope.maine,
  			 	ora2: "19:20"
  			 },
  			 {
  			   	plecare: "Chisinau",
  			 	data1: $scope.poimaine,
  			 	ora1: "20:30",
  			 	destinatia: "Adjud",
  			 	data2: $scope.poimaine,
  			 	ora2: "1:45"
  			 },
  			 {
  		  		plecare: "Aneni",
  			 	data1: $scope.poimaine,
  			 	ora1: "7:45",
  			 	destinatia: "Chisinau",
  			 	data2: $scope.poimaine,
  			 	ora2: "8:45"
  			 },
  			 ];

  			 $scope.orderByMe = function(x) {
       		$scope.myOrderBy = x;
    		};

    		$scope.filtru = {};

    		$scope.trenuri = ['Marcă Comună','Viteza Mare','Rapid','Pasager'];

    		$scope.bilet = {};

    	$scope.submit = function(){
		$scope.bilet.nume = $scope.bilet_nume;
		$scope.bilet.prenume = $scope.bilet_prenume;
		$scope.bilet.data = $scope.bilet_data;
		$scope.bilet.numar = $scope.bilet_numar;
		$scope.bilet.vagon = $scope.bilet_vagon;
		$scope.bilet.calatorie = $scope.bilet_calatorie;
		switch($scope.bilet_vagon){
			case 'Suita': $scope.bilet.total = 75 * $scope.bilet_numar; break;
			case 'Coupe': $scope.bilet.total = 99 * $scope.bilet_numar; break;
			case 'Rezervat': $scope.bilet.total = 200 * $scope.bilet_numar; break;
			case 'Sedentar': $scope.bilet.total = 299 * $scope.bilet_numar; break;
		}
		$scope.rezultat_bilet = false;
		};

		$scope.renunta = function(){
		$scope.bilet.nume = "";
		$scope.bilet.prenume = "";
		$scope.bilet.data = {};
		$scope.bilet.numar = 0;
		$scope.bilet.vagon = "";
		$scope.bilet.calatorie = {};
		$scope.bilet.total = 0;
		};

		$scope.cumpara = function(){
			alert("Ai cumparat bilet!");
		}

		});
	</script>
</body>
</html>